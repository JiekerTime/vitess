[
  {
    "comment": "aggregate function and group by with limit",
    "query": "select max(f_int),min(name) from t_user group by id,f_tinyint order by f_tinyint desc limit 20",
    "plan": {
      "QueryType": "SELECT",
      "Original": "select max(f_int),min(name) from t_user group by id,f_tinyint order by f_tinyint desc limit 20",
      "Instructions": {
        "OperatorType": "Limit",
        "Count": "INT64(20)",
        "Inputs": [
          {
            "OperatorType": "Aggregate",
            "Variant": "Ordered",
            "Aggregates": "max(0|6) AS max(f_int), min(1|7) AS min(`name`), any_value(3) AS weight_string(f_tinyint)",
            "GroupBy": "(2|3), (4|5)",
            "ResultColumns": 2,
            "Inputs": [
              {
                "OperatorType": "TableRoute",
                "Variant": "Scatter-Scatter",
                "Keyspace": {
                  "Name": "user",
                  "Sharded": true
                },
                "FieldQuery": "select max(f_int), min(`name`), f_tinyint, weight_string(f_tinyint), id, weight_string(id), weight_string(f_int), weight_string(`name`) from t_user_0 where 1 != 1 group by id, f_tinyint, weight_string(id), weight_string(f_int), weight_string(`name`)",
                "OrderBy": "(2|3) DESC, (4|5) ASC",
                "Query": "select max(f_int), min(`name`), f_tinyint, weight_string(f_tinyint), id, weight_string(id), weight_string(f_int), weight_string(`name`) from t_user group by id, f_tinyint, weight_string(id), weight_string(f_int), weight_string(`name`) order by f_tinyint desc, id asc limit :__upper_limit",
                "Table": "t_user"
              }
            ]
          }
        ]
      },
      "TablesUsed": [
        "user.t_user"
      ]
    }
  },
  {
    "comment": "aggregate function and group by",
    "query": "select max(f_int),min(name) from t_user group by id,f_tinyint order by f_tinyint asc",
    "plan": {
      "QueryType": "SELECT",
      "Original": "select max(f_int),min(name) from t_user group by id,f_tinyint order by f_tinyint asc",
      "Instructions": {
        "OperatorType": "Aggregate",
        "Variant": "Ordered",
        "Aggregates": "max(0|6) AS max(f_int), min(1|7) AS min(`name`), any_value(3) AS weight_string(f_tinyint)",
        "GroupBy": "(2|3), (4|5)",
        "ResultColumns": 2,
        "Inputs": [
          {
            "OperatorType": "TableRoute",
            "Variant": "Scatter-Scatter",
            "Keyspace": {
              "Name": "user",
              "Sharded": true
            },
            "FieldQuery": "select max(f_int), min(`name`), f_tinyint, weight_string(f_tinyint), id, weight_string(id), weight_string(f_int), weight_string(`name`) from t_user_0 where 1 != 1 group by id, f_tinyint, weight_string(id), weight_string(f_int), weight_string(`name`)",
            "OrderBy": "(2|3) ASC, (4|5) ASC",
            "Query": "select max(f_int), min(`name`), f_tinyint, weight_string(f_tinyint), id, weight_string(id), weight_string(f_int), weight_string(`name`) from t_user group by id, f_tinyint, weight_string(id), weight_string(f_int), weight_string(`name`) order by f_tinyint asc, id asc",
            "Table": "t_user"
          }
        ]
      },
      "TablesUsed": [
        "user.t_user"
      ]
    }
  },
  {
    "comment": "aggregate function and group by tableVindex",
    "query": "select max(f_int),min(name) from t_user group by col order by f_tinyint asc",
    "plan": {
      "QueryType": "SELECT",
      "Original": "select max(f_int),min(name) from t_user group by col order by f_tinyint asc",
      "Instructions": {
        "OperatorType": "Sort",
        "Variant": "Memory",
        "OrderBy": "(2|6) ASC",
        "ResultColumns": 2,
        "Inputs": [
          {
            "OperatorType": "Aggregate",
            "Variant": "Ordered",
            "Aggregates": "max(0|4) AS max(f_int), min(1|5) AS min(`name`), any_value(2) AS f_tinyint, any_value(6)",
            "GroupBy": "3",
            "Inputs": [
              {
                "OperatorType": "TableRoute",
                "Variant": "Scatter-Scatter",
                "Keyspace": {
                  "Name": "user",
                  "Sharded": true
                },
                "FieldQuery": "select max(f_int), min(`name`), f_tinyint, col, weight_string(f_int), weight_string(`name`), weight_string(f_tinyint) from t_user_0 where 1 != 1 group by col, weight_string(f_int), weight_string(`name`)",
                "OrderBy": "3 ASC",
                "Query": "select max(f_int), min(`name`), f_tinyint, col, weight_string(f_int), weight_string(`name`), weight_string(f_tinyint) from t_user group by col, weight_string(f_int), weight_string(`name`) order by col asc",
                "Table": "t_user"
              }
            ]
          }
        ]
      },
      "TablesUsed": [
        "user.t_user"
      ]
    }
  },
  {
    "comment": "aggregate function and group by tableVindex & Vindex",
    "query": "select max(f_int),min(name) from t_user group by col,id order by f_tinyint asc",
    "plan": {
      "QueryType": "SELECT",
      "Original": "select max(f_int),min(name) from t_user group by col,id order by f_tinyint asc",
      "Instructions": {
        "OperatorType": "TableRoute",
        "Variant": "Scatter-Scatter",
        "Keyspace": {
          "Name": "user",
          "Sharded": true
        },
        "FieldQuery": "select max(f_int), min(`name`), f_tinyint, weight_string(f_tinyint) from t_user_0 where 1 != 1 group by col, id",
        "OrderBy": "(2|3) ASC",
        "Query": "select max(f_int), min(`name`), f_tinyint, weight_string(f_tinyint) from t_user group by col, id order by f_tinyint asc",
        "ResultColumns": 2,
        "Table": "t_user"
      },
      "TablesUsed": [
        "user.t_user"
      ]
    }
  }
]
